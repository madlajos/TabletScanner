<mat-sidenav-container class="sidenav-container">
  <mat-sidenav mode="side" opened class="sidenav">
    <mat-accordion multi="true">
      <mat-expansion-panel expanded="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Lamp Controller
          </mat-panel-title>
        </mat-expansion-panel-header>
        <app-lamp-control></app-lamp-control>
      </mat-expansion-panel>


      <mat-expansion-panel expanded="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Camera Settings
          </mat-panel-title>
        </mat-expansion-panel-header>
        <app-camera-control></app-camera-control>
      </mat-expansion-panel>

      <mat-expansion-panel expanded="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            COM Settings
          </mat-panel-title>
        </mat-expansion-panel-header>
        <app-comport-control></app-comport-control>
      </mat-expansion-panel>

      
      <mat-expansion-panel expanded="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Printer Control
          </mat-panel-title>
        </mat-expansion-panel-header>
        <app-printer-control></app-printer-control>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-sidenav>
</mat-sidenav-container>


<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get the image-list element
  var imageList = document.querySelector('.image-list');

  // Get the fetchImagesButton element
  var fetchImagesButton = document.getElementById('fetchImagesButton');

  // Add click event listener to the fetchImagesButton
  fetchImagesButton.addEventListener('click', function() {
    // Make HTTP GET request to Flask backend
    fetch('http://localhost:5000/get-images')
      .then(response => response.json())
      .then(data => {
        // Clear previous images
        imageList.innerHTML = '';

        // Loop through the data (image file paths)
        data.forEach((filePath, i) => {
          // Create an li element for each image
          var li = document.createElement('li');

          // Create an img element
          var img = document.createElement('img');
          img.src = filePath;
          img.alt = 'Image ' + (i + 1);
          // Apply CSS styling for width and height
          img.style.width = '100px';
          img.style.height = '73px';
          // Append the img element to the li element
          li.appendChild(img);

          // Append the li element to the image-list ul
          imageList.appendChild(li);
        });
      })
      .catch(error => console.error('Error:', error));
  });
});
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Array of image file paths
    var out_files0 = out_files0;
  
    // Get the image-list element
    var imageList2 = document.querySelector('.image-list2');
  
    // Loop through the out_files array
    for (var i = 0; i < out_files0.length; i++) {
      // Create an li element for each image
      var li = document.createElement('li');
  
      // Create an img element
      var img2 = document.createElement('img2');
      img2.src = out_files0[i];
      img2.alt = 'Image ' + (i + 1);
       // Apply CSS styling for width and height
       img2.style.width = '100px';
      img2.style.height = '73px';
      // Append the img element to the li element
      li.appendChild(img2);
  
      // Append the li element to the image-list ul
      imageList2.appendChild(li);
    }
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const startVideoButton = document.querySelector('#startVideoButton');
    const videoContainer = document.querySelector('.video-container');
    const videoUrl = 'http://localhost:5000/video-stream';

    startVideoButton.addEventListener('click', () => {
      openURL(videoUrl);
    });

    function openURL(videoUrl) {
      // Create a video element
      var video = document.createElement('video');

      // Set the source URL for the video
      video.src = videoUrl;

      // Set other attributes
      video.controls = true;
      video.autoplay = true;
      video.loop = true;

      // Apply CSS styling for width and height
      video.style.width = '70%';
      video.style.height = '70%';
      video.style.marginLeft=0;

      // Remove any existing video elements from the container
      videoContainer.innerHTML = '';

      // Append the video element to the container
      videoContainer.appendChild(video);
    }
  });
</script>